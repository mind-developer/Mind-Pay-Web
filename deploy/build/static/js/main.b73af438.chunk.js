(this.webpackJsonpmind_pay_frontend=this.webpackJsonpmind_pay_frontend||[]).push([[0],{327:function(e,t,a){e.exports=a.p+"static/media/mainlogo.85c12dad.png"},360:function(e,t,a){e.exports=a(594)},365:function(e,t,a){},430:function(e,t,a){},594:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),o=a(36),i=a.n(o),c=(a(365),a(366),a(39)),u=a.n(c),m=a(167),s=a(38),d=a(89),f=a(90),p=f.a.section(n||(n=Object(d.a)(["\n  background-color: rgb(46, 46, 46);\n  position: fixed;\n  height: 100vh;\n  width: 100%;\n  justify-content: center;\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n\n  img {\n    width: 250px;\n    margin-bottom: 30px;\n  }\n\n  form {\n    width: 400px;\n\n    .ant-form-item-explain,\n    .ant-form-item-extra {\n      color: #ff4d4f;\n    }\n\n    .ant-input-affix-wrapper {\n      outline: none;\n\n      & {\n        border: 0;\n        border-bottom: 1px white solid;\n      }\n\n      &,\n      * {\n        background-color: transparent;\n        color: white;\n      }\n\n      &.ant-input-affix-wrapper-focused {\n        box-shadow: none;\n      }\n    }\n\n    .login-form-button {\n      width: 100%;\n      background: #dc1d45;\n      border-color: #d81e3d;\n      margin-top: 10px;\n      border-radius: 5px;\n    }\n  }\n"]))),E=a(353),g=a(609),h=a(611),b=a(49),v=a(619),y=a(620),x=a(327),k=a.n(x),j=a(130),I=a.n(j),w=a(115),O=a.n(w),S=a(162),C=a(80),N=l.a.createContext({});function _(e){var t=e.children,a=Object(r.useState)(null),n=Object(C.a)(a,2),o=n[0],i=n[1],c=Object(r.useState)(!0),m=Object(C.a)(c,2),s=m[0],d=m[1];function f(){i(null),localStorage.removeItem("user",null),localStorage.removeItem("jwtToken",null)}function p(){return(p=Object(S.a)(O.a.mark((function e(t){var a,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.user,n=t.token,i(a),localStorage.setItem("user",JSON.stringify(a)),localStorage.setItem("jwtToken",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){var e=localStorage.getItem("user"),t=localStorage.getItem("jwtToken");i(t?JSON.parse(e):null),d(!1)}),[d]);var E=function(){var e=Object(S.a)(O.a.mark((function e(t){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise((function(e){setTimeout((function(){var t=localStorage.getItem("jwtToken");e(t)}),50)})),e.abrupt("return",a.then((function(e){return u.a.get(t,{headers:{Authorization:e}}).then((function(e){return e})).catch((function(e){401===e.response.status?f():alert("Erro interno, por favor tente novamente ou contate um administrador!")}))})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(N.Provider,{value:{isAuthenticated:Boolean(o),user:o,isLoading:s,login:function(e){return p.apply(this,arguments)},logout:f,fetcher:E}},t)}E.b.config({maxCount:3});var z,P,R=function(){var e=Object(r.useContext)(N).login;return l.a.createElement(p,null,l.a.createElement("img",{alt:"MindLogo",src:k.a}),l.a.createElement(g.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(t){u.a.post("/admin/login",t).then((function(t){e(t.data)})).catch((function(e){var t;E.b.error(null===(t=e.response)||void 0===t?void 0:t.data)}))}},l.a.createElement(g.a.Item,{name:"cpf",rules:[{required:!0,message:"Por favor coloque com sua login!"}]},l.a.createElement(I.a,{mask:"999.999.999-99",maskPlaceholder:""},(function(){return l.a.createElement(h.a,{prefix:l.a.createElement(v.a,{className:"site-form-item-icon"}),autoComplete:"off",placeholder:"Login"})}))),l.a.createElement(g.a.Item,{name:"password",rules:[{required:!0,message:"Por favor coloque com sua senha!"}]},l.a.createElement(h.a,{prefix:l.a.createElement(y.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Senha"})),l.a.createElement(g.a.Item,null,l.a.createElement(b.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Entrar"))))},q=a(604),F=a(125),A=(a(430),a(351)),T=a(618),L=a(204),B=a(605),D=a(58),V=f.a.span(z||(z=Object(d.a)(["\n    width: 10px;\n    height: 10px;\n    background: ",";\n    display: block;\n    border-radius: 100%;\n    margin-left: 30px;\n"])),(function(e){return e.status?"#0aff0a":"red"})),$=(f.a.img(P||(P=Object(d.a)(["\n    width: 150px;\n    height: 150px;\n    border-radius: 100%;\n    object-fit: cover;\n"]))),a(168)),U=a(212),M=a(621),J=a(614),K=a(601),H=a(602),G=a(73),W=a(331);var Q=function(e){var t=e.IsOpen,a=e.setIsOpen,n=Object(W.useForm)(),o=Object(C.a)(n,1)[0],i=Object(r.useState)(!1),c=Object(C.a)(i,2),m=c[0],s=c[1];return l.a.createElement(J.a,{title:"Cadastrar novo minder",width:400,onClose:function(){return a((function(e){return!e}))},visible:t,bodyStyle:{paddingBottom:80},footer:l.a.createElement("div",{style:{textAlign:"right"}},l.a.createElement(b.a,{style:{marginRight:8},onClick:function(){return a((function(e){return!e}))}},"Cancel"),l.a.createElement(b.a,{type:"primary",onClick:function(){return o.submit()},disabled:m},m?l.a.createElement(G.a,null):"Enviar"))},l.a.createElement(g.a,{layout:"vertical",form:o,onFinish:function(e){s(!0),u.a.post("/register",e).then((function(e){o.resetFields(),E.b.success("Usu\xe1rio cadastrado com sucesso!"),Object(D.b)("/users"),a(!1)})).catch((function(e){E.b.error(e.response.data)})).finally((function(){s(!1)}))},hideRequiredMark:!0},l.a.createElement(K.a,{gutter:16},l.a.createElement(H.a,{span:24},l.a.createElement(g.a.Item,{name:"name",label:"Nome",rules:[{required:!0,message:"Please enter user name"}]},l.a.createElement(h.a,{placeholder:"Nome",autoComplete:"off"})))),l.a.createElement(K.a,{gutter:16},l.a.createElement(H.a,{span:12},l.a.createElement(g.a.Item,{name:"cpf",label:"CPF",rules:[{required:!0,message:"Por favor digite o CPF"}]},l.a.createElement(I.a,{mask:"999.999.999-99",maskPlaceholder:""},(function(){return l.a.createElement(h.a,{placeholder:"CPF",autoComplete:"off"})})))),l.a.createElement(H.a,{span:12},l.a.createElement(g.a.Item,{name:"email",label:"Email",rules:[{required:!0,message:"Por favor digite o email"}]},l.a.createElement(h.a,{placeholder:"Email",autoComplete:"off"}))))))},X=a(332),Y=a.n(X);var Z,ee,te,ae=function(e){return l.a.createElement(F.a,null,l.a.createElement(F.a.Item,null,l.a.createElement("a",{href:"/user/"+e.id},"Ver Mais")),l.a.createElement(F.a.Item,null,"Ver Recibos"),l.a.createElement(F.a.Item,{danger:!0,onClick:function(){return function(e){var t=e.name,a=e.id;A.a.confirm({title:"Tem certeza que deseja excluir "+t+"?",icon:l.a.createElement($.a,null),content:"Essa a\xe7\xe3o \xe9 irreversivel",okText:"Sim",cancelText:"Cancelar",onOk:function(){var e=localStorage.getItem("jwtToken");u.a.delete("/user/"+a,{headers:{Authorization:e}}).then((function(e){E.b.success("Usu\xe1rio excluido com sucesso"),Object(D.b)("/users")}))}})}({name:e.name,id:e.id})}},"Excluir"))},ne=[{title:"Avatar",dataIndex:"profile_image",key:"profile_image",render:function(e,t){return l.a.createElement(Y.a,{src:u.a.defaults.baseURL+"media/"+e},null===t||void 0===t?void 0:t.name[0])}},{title:"Nome",dataIndex:"name",key:"nome",render:function(e,t){return l.a.createElement("a",{href:"/user/"+t.id},e)}},{title:"Email",dataIndex:"email",key:"email"},{title:"CPF",dataIndex:"cpf",key:"cpf",render:function(e){return l.a.createElement("span",null,e.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"))}},{title:"Data de Nascimento",dataIndex:"data_de_nascimento",key:"cpf",render:function(e){return l.a.createElement("span",null,new Date(e).toLocaleDateString("pt-br"))}},{title:"Finalizou?",dataIndex:"finished_registration",key:"cpf",render:function(e){return l.a.createElement("span",null,l.a.createElement(V,{status:Boolean(e)}))}},{title:"Action",key:"action",render:function(e,t){return l.a.createElement(T.b,{size:"middle"},l.a.createElement(L.a,{overlay:function(){return ae(t)}},l.a.createElement(b.a,{type:"dashed",className:"ant-dropdown-link",onClick:function(e){return e.preventDefault()}},"Mais Op\xe7\xf5es ",l.a.createElement(U.a,null))))}}],re=function(e){var t=localStorage.getItem("jwtToken");return u.a.get(e,{headers:{Authorization:t}}).then((function(e){return e}))},le=function(){var e=Object(D.a)("/users",re).data,t=Object(r.useState)(!1),a=Object(C.a)(t,2),n=a[0],o=a[1];return l.a.createElement("div",{className:"site-layout-background",style:{padding:24}},l.a.createElement(Q,{IsOpen:n,setIsOpen:o}),l.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},l.a.createElement(b.a,{type:"primary",onClick:function(){return o((function(e){return!e}))}},l.a.createElement(M.a,null)," Criar novo minder")),l.a.createElement("h1",null,"Listagem de Minders"),l.a.createElement(B.a,{loading:Boolean(!e),locale:{emptyText:"Sem dados"},rowKey:"id",theme:"",pagination:{pageSize:5},columns:ne,dataSource:null===e||void 0===e?void 0:e.data}))},oe=f.a.span(Z||(Z=Object(d.a)(["\n    width: 10px;\n    height: 10px;\n    background: ",";\n    display: block;\n    border-radius: 100%;\n"])),(function(e){return e.status?"#0aff0a":"red"})),ie=(f.a.img(ee||(ee=Object(d.a)(["\n    width: 150px;\n    height: 150px;\n    border-radius: 100%;\n    object-fit: cover;\n"]))),a(623)),ce=a(244),ue=a.n(ce),me=a(622),se=function(e){var t=e.record;return l.a.createElement(g.a,null,l.a.createElement(g.a.Item,{name:"receipt_location"},l.a.createElement(ue.a,{accept:"png",name:"avatar",customRequest:function(e){var a=new FormData;a.append("file",e.file),u.a.put("/requests/"+t.id,a,{headers:{Authorization:localStorage.getItem("jwtToken"),"Content-Type":"multipart/form-data"}}).then((function(e){A.a.destroyAll(),E.b.success("Recibo enviado com sucesso!"),Object(D.b)("/requests/all")})).catch((function(e){E.b.error("Desculpe, ocorreu um erro :(")}))}},l.a.createElement("p",{className:"ant-upload-drag-icon"},l.a.createElement(me.a,null)),l.a.createElement("p",{className:"ant-upload-text"},"Clique ou arraste para subir o recibo"))))},de=a(250),fe=a.n(de),pe=new Intl.NumberFormat("pt-BR",{maximumSignificantDigits:3}),Ee=[{title:"Nome",dataIndex:["users","name"],key:"nome",render:function(e,t){return l.a.createElement("a",{href:"user/".concat(t.user_id),title:"Ir para usu\xe1rio"},e)}},{title:"Valor",dataIndex:"amount",key:"amount",render:function(e){return l.a.createElement("span",null,"R$ ",pe.format(e))}},{title:"Descri\xe7\xe3o",dataIndex:"description",key:"description",render:function(e){return l.a.createElement("span",{style:{maxWidth:"250px"}},e)}},{title:"Pago?",dataIndex:"request_finished",key:"request_finished",render:function(e){return l.a.createElement("span",null,l.a.createElement(oe,{status:Boolean(e)}))},filters:[{text:"Pago",value:1},{text:"Em aberto",value:null}],onFilter:function(e,t){return t.request_finished===e}},{title:"Data",dataIndex:"created_at",key:"created_at",sorter:function(e,t){return fe()(e.created_at).unix()-fe()(t.created_at).unix()}},{title:"A\xe7\xe3o",key:"acao",render:function(e,t){return l.a.createElement(T.b,{size:"middle"},!t.request_finished&&l.a.createElement(b.a,{type:"danger",className:"ant-dropdown-link",onClick:function(e){return A.a.confirm(function(e){return{title:"Enviar Recibo",content:l.a.createElement(se,{record:e})}}(t))}},"Pagar"))}}],ge={expandedRowRender:function(e){return!!e.receipt_location&&l.a.createElement("a",{href:u.a.defaults.baseURL+"media/"+e.receipt_location},l.a.createElement(ie.a,null),e.receipt_location)}},he=function(){var e=Object(r.useContext)(N).fetcher,t=Object(D.a)("/requests/all",e).data;return l.a.createElement("div",{className:"site-layout-background",style:{padding:24}},l.a.createElement("h1",null,"Listagem de Pedidos"),l.a.createElement(B.a,{loading:Boolean(!t),locale:{emptyText:"Sem dados"},rowKey:"id",expandable:ge,theme:"",pagination:{pageSize:5},columns:Ee,dataSource:null===t||void 0===t?void 0:t.data}))},be=a(624),ve=a(625),ye=a(626),xe=a(348),ke=a(335),je=a(607),Ie=a(613),we=a(338),Oe=function(e){var t=Object(we.useParams)().id,a=void 0===t?"":t,n=Object(r.useContext)(N).fetcher,o=Object(D.a)("/user/".concat(a),n).data,i=g.a.useForm(),c=Object(C.a)(i,1)[0],m=Object(r.useState)([]),s=Object(C.a)(m,2),d=s[0],f=s[1],p=function(e,t,a){return E.b.loading({content:e,key:a}),function(){E.b.success({content:t,key:a})}},y=function(){var e=Object(S.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=p("Atualizando!","Atualizado!","attdados"),u.a.put("/user/"+a,t,{headers:{Authorization:localStorage.getItem("jwtToken")}}).then((function(e){n()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o?l.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:350}},l.a.createElement(g.a,{name:"normal_login",form:c,className:"login-form",initialValues:{remember:!0},onFinish:y},l.a.createElement(g.a.Item,{noStyle:!0},l.a.createElement(g.a.Item,null,l.a.createElement(xe.a,null,l.a.createElement(je.a.Dragger,{onRemove:function(){f([])},customRequest:function(e){var t=p("Atualizando!","Foto de perfil atualizada com sucesso!","attimagem"),n=new FormData;n.append("file",e.file),u.a.patch("/user/profile/"+a,n,{headers:{Authorization:localStorage.getItem("jwtToken"),"Content-Type":"multipart/form-data"}}).then((function(e){t(),Object(D.b)("/user/".concat(a))}))},fileList:d,multiple:!1},l.a.createElement(Ie.a,{style:{fontSize:50,margin:"1.5rem 0"},size:200,src:(null===o||void 0===o?void 0:o.data.profile_image)&&u.a.defaults.baseURL+"media/"+(null===o||void 0===o?void 0:o.data.profile_image),alt:"profile_image"},null===o||void 0===o?void 0:o.data.name[0]),l.a.createElement("p",{className:"ant-upload-hint"},"Clique ou arraste para adicionar uma foto de perfil"))))),l.a.createElement(g.a.Item,{style:{marginBottom:0}},l.a.createElement(g.a.Item,{name:"name"},l.a.createElement(h.a,{placeholder:"Nome",defaultValue:null===o||void 0===o?void 0:o.data.name,prefix:l.a.createElement(v.a,{className:"site-form-item-icon"})}))),l.a.createElement(g.a.Item,{name:"cpf"},l.a.createElement(h.a,{placeholder:"CPF",defaultValue:null===o||void 0===o?void 0:o.data.cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"),prefix:l.a.createElement(v.a,{className:"site-form-item-icon"})})),l.a.createElement(g.a.Item,{style:{marginBottom:0}},l.a.createElement(g.a.Item,{name:"agency_number",style:{display:"inline-block",width:"calc(50%)"}},l.a.createElement(h.a,{placeholder:"Numero da Agencia",defaultValue:null===o||void 0===o?void 0:o.data.agency_number,prefix:l.a.createElement(be.a,{className:"site-form-item-icon"})})),l.a.createElement(g.a.Item,{name:"bank",style:{display:"inline-block",width:"calc(50% - 8px)",marginLeft:"8px"}},l.a.createElement(h.a,{placeholder:"Banco",defaultValue:null===o||void 0===o?void 0:o.data.bank,prefix:l.a.createElement(ve.a,{className:"site-form-item-icon"})}))),l.a.createElement(g.a.Item,{name:"account",type:"text"},l.a.createElement(I.a,{mask:"999999-9",defaultValue:null===o||void 0===o?void 0:o.data.account},(function(e){return l.a.createElement(h.a,Object.assign({},e,{placeholder:"Numero da conta",prefix:l.a.createElement(v.a,{className:"site-form-item-icon"})}))}))),l.a.createElement(g.a.Item,{name:"email",type:"email"},l.a.createElement(h.a,{placeholder:"Email",defaultValue:null===o||void 0===o?void 0:o.data.email,prefix:l.a.createElement(ye.a,{className:"site-form-item-icon"})})),l.a.createElement(g.a.Item,null,l.a.createElement(b.a,{style:{marginRight:"10px"},type:"primary",htmlType:"submit",className:"login-form-button"},"Atualizar")))):l.a.createElement(ke.a,{indicator:l.a.createElement(G.a,null)})},Se=a(610),Ce=a(606),Ne=a(616),_e=f.a.div(te||(te=Object(d.a)(["\n    flex-direction: column;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n    text-align: center;\n\n    \n    h1{\n        font-size: 42px;\n        font-family: 'poppins';\n    }\n\n"]))),ze={independentAxis:{style:{tickLabels:{fill:"black",angle:0,padding:10,fontSize:10,fontFamily:"Poppins"},grid:{stroke:"transparent"}}},dependentAxis:{style:{tickLabels:{fill:"black",padding:5,fontSize:10,fontFamily:"Poppins"},grid:{stroke:"transparent"}}}},Pe=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"];var Re=function(){var e=Object(r.useContext)(N).fetcher,t=Object(D.a)("/users/count",e).data,a=Object(D.a)("/users/payments",e).data;return t||a?l.a.createElement(_e,null,l.a.createElement(K.a,{style:{justifyContent:"space-between",alignItems:"center",width:"70%"}},l.a.createElement(H.a,{span:24},l.a.createElement("h1",{style:{marginTop:20}},"Gr\xe1fico de pagamentos mensais"),(null===a||void 0===a?void 0:a.data)&&l.a.createElement(Se.a,{height:250,theme:ze},l.a.createElement(Ce.a,{interpolation:"linear",data:null===a||void 0===a?void 0:a.data.map((function(e,t){return{x:Pe[t],y:e}})),style:{data:{stroke:"black"}}}),l.a.createElement(Ne.a,{data:null===a||void 0===a?void 0:a.data.map((function(e,t){return{x:Pe[t],y:e}})),size:2,style:{data:{fill:"black"}}}))),l.a.createElement(H.a,{span:24,style:{marginBottom:50}},l.a.createElement("h1",null,"j\xe1 somos ",null===t||void 0===t?void 0:t.data.length," Minders"),null===t||void 0===t?void 0:t.data.map((function(e){return l.a.createElement(Ie.a,{alt:e.name,size:50,style:{objectFit:"cover"},src:u.a.defaults.baseURL+"media/"+e.profile_image},e.name[0])}))))):l.a.createElement(ke.a,{indicator:l.a.createElement(G.a,null)})},qe=a(627),Fe=a(628),Ae=a(629),Te=[{path:"/user/:id",component:function(){return l.a.createElement(Oe,null)},onlyRoute:!0},{name:"Perfil",path:"/user/",component:function(){return l.a.createElement(Oe,null)},icon:l.a.createElement(v.a,null)},{name:"Usu\xe1rios",path:"/users",component:function(){return l.a.createElement(le,null)},icon:l.a.createElement(qe.a,null)},{name:"Pagamentos",path:"/requests",component:function(){return l.a.createElement(he,null)},icon:l.a.createElement(Fe.a,null)},{name:"Dashboards",path:"/",component:function(){return l.a.createElement(Re,null)},icon:l.a.createElement(Ae.a,null)}],Le={};Te.forEach((function(e,t){Le[e.path]=t.toString()}));var Be=Te,De=Le,Ve=q.a.Content,$e=q.a.Sider,Ue=function(){var e=Object(s.useLocation)().pathname;return l.a.createElement(m.a,null,l.a.createElement(q.a,{style:{minHeight:"100vh"}},l.a.createElement($e,{collapsible:!0},l.a.createElement(F.a,{theme:"dark",mode:"inline",defaultSelectedKeys:[De[e]]},Be.map((function(e,t){return e.onlyRoute?null:l.a.createElement(F.a.Item,{icon:e.icon,key:t},l.a.createElement(m.b,{to:e.path},e.name))})))),l.a.createElement(q.a,{className:"site-layout"},l.a.createElement(Ve,{style:{margin:"16px",padding:"0 16px"}},l.a.createElement(s.Switch,null,Be.map((function(e,t){var a=e.path,n=e.component;return l.a.createElement(s.Route,{key:t,path:a,component:n})})))))))};u.a.defaults.baseURL="https://mindpay.mindconsulting.com.br/api";var Me=function(){var e=Object(r.useContext)(N),t=e.isAuthenticated;return e.isLoading?l.a.createElement(l.a.Fragment,null):l.a.createElement(m.a,null,l.a.createElement(s.Switch,null,l.a.createElement(s.Route,{path:"/"},t?l.a.createElement(Ue,null):l.a.createElement(R,null))))};i.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(_,null,l.a.createElement(Me,null))),document.getElementById("root"))}},[[360,1,2]]]);
//# sourceMappingURL=main.b73af438.chunk.js.map